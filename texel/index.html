<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Texel.ai Advanced Video Generation Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            color: #ffffff;
            min-height: 100vh;
            display: flex;
        }

        .sidebar {
            width: 280px;
            background: #151515;
            border-right: 1px solid #333;
            padding: 20px 0;
            overflow-y: auto;
        }

        .logo {
            padding: 0 20px;
            margin-bottom: 30px;
            font-size: 24px;
            font-weight: bold;
            color: #ff6b35;
        }

        .nav-section {
            margin-bottom: 30px;
        }

        .nav-title {
            padding: 0 20px;
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .nav-item {
            padding: 12px 20px;
            color: #ccc;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-item:hover {
            background: #252525;
            color: #fff;
        }

        .nav-item.active {
            background: #ff6b35;
            color: #fff;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: #1a1a1a;
            border-bottom: 1px solid #333;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #ccc;
        }

        .interface-container {
            flex: 1;
            display: flex;
            padding: 20px;
            gap: 20px;
        }

        .left-panel {
            flex: 1;
            background: #252525;
            border-radius: 12px;
            padding: 20px;
        }

        .right-panel {
            flex: 1;
            background: #252525;
            border-radius: 12px;
            padding: 20px;
        }

        .tabs {
            display: flex;
            gap: 2px;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 16px;
            background: #1a1a1a;
            border: none;
            color: #888;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            transition: all 0.2s;
        }

        .tab.active {
            background: #ff6b35;
            color: #fff;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #ccc;
            font-size: 14px;
        }

        .form-control {
            width: 100%;
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 12px;
            color: #fff;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.2s;
        }

        .form-control:focus {
            outline: none;
            border-color: #ff6b35;
        }

        .textarea {
            min-height: 120px;
        }

        .model-select {
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 12px;
            color: #fff;
            width: 100%;
        }

        .prompt-library {
            margin-bottom: 20px;
        }

        .prompt-category {
            margin-bottom: 15px;
        }

        .category-title {
            color: #ff6b35;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .prompt-option {
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 12px;
        }

        .prompt-option:hover {
            border-color: #ff6b35;
            background: #2a2a2a;
        }

        .generate-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-top: 1px solid #444;
        }

        .token-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #f39c12;
        }

        .generate-btn {
            background: linear-gradient(135deg, #ff6b35, #f39c12);
            border: none;
            color: #fff;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .generate-btn:hover {
            transform: translateY(-1px);
        }

        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .output-area {
            background: #1a1a1a;
            border: 2px dashed #444;
            border-radius: 12px;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            position: relative;
            overflow: hidden;
        }

        .output-content {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #444;
            border-top: 3px solid #ff6b35;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .api-config {
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .api-config-title {
            color: #ff6b35;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .result-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-secondary {
            background: #444;
            border: none;
            color: #fff;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }

        .btn-secondary:hover {
            background: #555;
        }

        .model-info {
            background: #1a1a1a;
            border-radius: 6px;
            padding: 10px;
            margin-top: 10px;
            font-size: 12px;
            color: #888;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="logo">üè† Texel</div>
        
        <div class="nav-section">
            <div class="nav-title">Application</div>
            <div class="nav-item">üìä Subscription</div>
            <div class="nav-item">üìà Generation Dashboard</div>
            <div class="nav-item active">üéØ AI Generation</div>
            <div class="nav-item">üìÅ My Media</div>
        </div>

        <div class="nav-section">
            <div class="nav-title">My Account</div>
            <div class="nav-item">üë§ Profile</div>
            <div class="nav-item">üö™ Sign out</div>
        </div>
    </div>

    <div class="main-content">
        <div class="header">
            <h1>Advanced AI Video Generation</h1>
            <div class="user-info">
                <span>üë§ Jordan</span>
            </div>
        </div>

        <div class="interface-container">
            <div class="left-panel">
                <div class="tabs">
                    <button class="tab">üìù Text</button>
                    <button class="tab">üñºÔ∏è Image</button>
                    <button class="tab active">üé• Video</button>
                </div>

                <div class="api-config">
                    <div class="api-config-title">API Configuration</div>
                    <div class="form-group">
                        <label class="form-label">API Key</label>
                        <input type="password" id="apiKey" class="form-control" placeholder="Enter your Texel.ai API key">
                    </div>
                </div>

                <div class="api-config">
                    <div class="api-config-title">Auto-Download Settings</div>
                    <div style="font-size: 12px; color: #888; line-height: 1.4;">
                        üìÅ <strong>Target Folder:</strong><br>
                        <code style="background: #1a1a1a; padding: 2px 6px; border-radius: 4px; font-size: 10px;">
                            /Users/supabowl/Library/Mobile Documents/com~apple~CloudDocs/BHT Promo iCloud/Organized AI/Texel Generated
                        </code>
                    </div>
                    <div style="margin-top: 8px; font-size: 11px; color: #666;">
                        ‚úÖ Videos auto-download after generation<br>
                        üìù Move from Downloads to organize in iCloud
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Model</label>
                    <select id="modelSelect" class="model-select">
                        <option value="ltxv">LTXV (Fast)</option>
                        <option value="hunyuan">Hunyuan Video (Cinematic)</option>
                        <option value="wan21">Wan 2.1 (Premium)</option>
                        <option value="framepack">Framepack (Progressive)</option>
                    </select>
                    <div class="model-info" id="modelInfo">
                        Fast generation for quick iterations and concept development
                    </div>
                </div>

                <div class="prompt-library">
                    <div class="form-label">Advanced Prompt Library</div>
                    
                    <div class="prompt-category">
                        <div class="category-title">Corporate Technology</div>
                        <div class="prompt-option" data-category="corporate" data-type="presentation">
                            Executive Technology Presentation
                        </div>
                        <div class="prompt-option" data-category="corporate" data-type="product">
                            Product Launch Demonstration
                        </div>
                    </div>

                    <div class="prompt-category">
                        <div class="category-title">Team Collaboration</div>
                        <div class="prompt-option" data-category="team" data-type="innovation">
                            Team Innovation Session
                        </div>
                        <div class="prompt-option" data-category="team" data-type="meeting">
                            Professional Team Meeting
                        </div>
                    </div>

                    <div class="prompt-category">
                        <div class="category-title">Customer Interaction</div>
                        <div class="prompt-option" data-category="customer" data-type="service">
                            Customer Service Excellence
                        </div>
                        <div class="prompt-option" data-category="customer" data-type="consultation">
                            Technical Consultation
                        </div>
                    </div>

                    <div class="prompt-category">
                        <div class="category-title">Innovation Showcase</div>
                        <div class="prompt-option" data-category="innovation" data-type="research">
                            Scientific Research Presentation
                        </div>
                        <div class="prompt-option" data-category="innovation" data-type="breakthrough">
                            Technology Breakthrough Demo
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Prompt</label>
                    <textarea id="promptText" class="form-control textarea" placeholder="Enter your prompt or select from the library above..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Negative Prompt (optional)</label>
                    <textarea id="negativePrompt" class="form-control" placeholder="Things to avoid in the generated content..."></textarea>
                </div>

                <div class="generate-section">
                    <div class="token-info">
                        <span>‚ö° 720.00 tokens</span>
                    </div>
                    <button id="generateBtn" class="generate-btn">
                        Generate
                        <span>‚û°Ô∏è</span>
                    </button>
                </div>
            </div>

            <div class="right-panel">
                <div class="tabs">
                    <button class="tab">üñºÔ∏è Image</button>
                    <button class="tab active">üé• Video</button>
                </div>

                <div id="outputArea" class="output-area">
                    <div style="text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 20px;">üé¨</div>
                        <div>Generated content will appear here</div>
                        <div style="color: #666; font-size: 12px; margin-top: 10px;">
                            Select a prompt and click Generate to start
                        </div>
                    </div>
                </div>

                <div id="resultActions" class="result-actions" style="display: none;">
                    <button class="btn-secondary" onclick="downloadResult()">üì• Download</button>
                    <button class="btn-secondary" onclick="saveToLibrary()">üíæ Save to Library</button>
                    <button class="btn-secondary" onclick="shareResult()">üîó Share</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Advanced prompt library with model-specific optimizations
        const promptLibrary = {
            corporate: {
                presentation: {
                    ltxv: "Business executive presents new technology on warm yellow gradient background. Professional presentation with confident gestures in clean corporate setting. Golden lighting highlights executive presence and innovation focus.",
                    hunyuan: "Distinguished CEO in premium charcoal business suit stands confidently before warm golden yellow gradient background, presenting revolutionary breakthrough technology to board of directors. Professional executive demonstrates cutting-edge innovation with natural hand gestures and commanding presence. Rich golden lighting (#F4D03F, #F7DC6F, #F1C40F) creates sophisticated studio atmosphere with subtle gradient transitions. Cinematic camera movement captures executive's passionate explanation of technological advancement while maintaining focus on leadership presence and innovation messaging.",
                    wan21: "Executive technology leader in meticulously tailored navy suit presents groundbreaking innovation against museum-quality golden gradient backdrop. Exceptional fabric texture rendering contrasts with warm amber lighting environment (#F4D03F to #F1C40F gradient). Premium studio setup showcases executive's confident presentation style with natural leadership gestures. High-fidelity material rendering captures every detail of professional attire against sophisticated golden yellow studio background.",
                    framepack: "Technology CEO approaches presentation area with confidence, establishing professional presence against golden gradient background (#F4D03F, #F7DC6F, F1C40F). Progressive animation shows executive's transition from entrance to commanding presentation stance, demonstrating natural leadership gestures while explaining breakthrough innovation."
                },
                product: {
                    ltxv: "Product manager demonstrates new device against yellow gradient background. Clear product presentation with professional explanation in modern tech showcase environment.",
                    hunyuan: "Marketing executive in sophisticated business attire unveils revolutionary consumer device against warm golden yellow studio background with subtle gradient lighting. Professional product demonstration showcases innovative technology with smooth, natural movements and genuine enthusiasm. Cinematic lighting setup (#F4D03F to #F1C40F) creates premium launch event atmosphere while highlighting both presenter's expertise and product's advanced features.",
                    wan21: "Product design leader in elegant presentation attire demonstrates next-generation technology against museum-quality golden gradient backdrop. Exceptional detail rendering shows precise interaction with innovative device while maintaining focus on product's sophisticated engineering. Premium studio lighting (#F4D03F, #F7DC6F, #F1C40F) highlights both product features and presenter's technical expertise.",
                    framepack: "Product specialist approaches demonstration area carrying innovative device, establishing professional credibility against golden gradient background. Progressive frame sequence shows transition from product introduction to detailed feature demonstration, highlighting technological capabilities through natural presentation movements."
                }
            },
            team: {
                innovation: {
                    ltxv: "Technology team collaborates on project against yellow gradient background. Professional team interaction with clear collaboration dynamics in modern workspace environment.",
                    hunyuan: "Diverse technology team of three professionals collaborates on breakthrough project against warm golden yellow gradient background. Team leader, software engineer, and design specialist engage in dynamic problem-solving discussion with natural interactions and collaborative energy. Sophisticated studio lighting (#F4D03F to #F1C40F) emphasizes team synergy and innovative thinking.",
                    wan21: "Cross-functional innovation team demonstrates collaborative excellence against museum-quality golden gradient studio. Exceptional detail rendering captures individual team member expertise while showcasing seamless collaboration dynamics. Premium lighting environment (#F4D03F, #F7DC6F, #F1C40F) highlights professional team interaction and shared innovation goals.",
                    framepack: "Innovation team members approach collaboration area individually, establishing professional dynamics against golden gradient background. Progressive animation shows team formation, idea sharing, and collaborative problem-solving sequence."
                }
            },
            customer: {
                service: {
                    ltxv: "Customer service specialist assists client against yellow gradient background. Professional customer interaction with clear communication in modern service environment.",
                    hunyuan: "Customer success specialist in professional business attire provides exceptional client consultation against warm golden yellow gradient background. Specialist demonstrates genuine care and technical expertise while explaining complex technology solutions with natural, approachable communication style. Sophisticated studio lighting (#F4D03F to #F1C40F) creates premium customer service atmosphere emphasizing both professional competence and human connection.",
                    wan21: "Senior customer experience leader delivers exceptional client consultation against museum-quality golden gradient studio. Exceptional detail rendering captures both professional expertise and genuine customer care throughout technology explanation. Premium lighting environment (#F4D03F, #F7DC6F, #F1C40F) highlights customer relationship excellence and technical solution delivery.",
                    framepack: "Customer specialist approaches consultation area with professional confidence, establishing customer service excellence against golden gradient background. Progressive animation shows transition from greeting to solution delivery, highlighting customer care and technical expertise."
                }
            },
            innovation: {
                research: {
                    ltxv: "Research scientist presents breakthrough discovery on yellow gradient background. Clear scientific presentation with professional explanation in modern research showcase environment.",
                    hunyuan: "Lead research scientist in professional lab attire presents revolutionary scientific discovery against warm golden yellow gradient background with sophisticated studio lighting. Researcher demonstrates groundbreaking innovation with passionate expertise and natural scientific explanation gestures. Cinematic environment (#F4D03F to #F1C40F) creates premium research presentation atmosphere while emphasizing both scientific rigor and breakthrough significance.",
                    wan21: "Distinguished research director presents cutting-edge scientific advancement against museum-quality golden gradient backdrop. Exceptional detail rendering captures researcher's precise explanation of breakthrough technology while maintaining focus on scientific innovation. Premium studio environment (#F4D03F, #F7DC6F, #F1C40F) highlights both research expertise and discovery significance.",
                    framepack: "Research scientist approaches presentation area with confidence, establishing scientific credibility against golden gradient background. Progressive animation shows transition from discovery introduction to detailed technical explanation, highlighting innovation significance through natural presentation movements."
                }
            }
        };

        // Negative prompts for each model
        const negativePrompts = {
            ltxv: "complex background, multiple characters, overdetailed scene, poor hand anatomy, unrealistic elements, blurred motion, slow movement",
            hunyuan: "poor hand anatomy, unrealistic design, clunky movements, harsh lighting, amateur composition, low quality textures, unconvincing design, stiffness",
            wan21: "poor material quality, unconvincing design, low detail rendering, artificial lighting, amateur appearance, unclear positioning, blurred elements",
            framepack: "jerky movements, unnatural behavior, poor material rendering, frame inconsistency, unconvincing design, rushed interaction timing"
        };

        // Model information
        const modelInfo = {
            ltxv: "Fast generation for quick iterations and concept development. Optimized for streamlined professional demonstrations.",
            hunyuan: "Cinematic quality with advanced camera movements and atmospheric lighting. Best for premium corporate presentations.",
            wan21: "Premium detail rendering with exceptional material quality. Museum-quality visual fidelity for high-end showcases.",
            framepack: "Progressive animation control with frame-by-frame precision. Perfect for smooth professional transitions."
        };

        // DOM elements
        const modelSelect = document.getElementById('modelSelect');
        const modelInfoDiv = document.getElementById('modelInfo');
        const promptText = document.getElementById('promptText');
        const negativePrompt = document.getElementById('negativePrompt');
        const generateBtn = document.getElementById('generateBtn');
        const outputArea = document.getElementById('outputArea');
        const resultActions = document.getElementById('resultActions');
        const apiKeyInput = document.getElementById('apiKey');

        // Update model info when selection changes
        modelSelect.addEventListener('change', function() {
            const selectedModel = this.value;
            modelInfoDiv.textContent = modelInfo[selectedModel];
            
            // Update negative prompt if it's currently using a model-specific negative prompt
            const currentNegative = negativePrompt.value;
            const isModelNegative = Object.values(negativePrompts).includes(currentNegative);
            if (isModelNegative || currentNegative === '') {
                negativePrompt.value = negativePrompts[selectedModel];
            }
        });

        // Handle prompt selection from library
        document.querySelectorAll('.prompt-option').forEach(option => {
            option.addEventListener('click', function() {
                const category = this.dataset.category;
                const type = this.dataset.type;
                const selectedModel = modelSelect.value;
                
                if (promptLibrary[category] && promptLibrary[category][type] && promptLibrary[category][type][selectedModel]) {
                    promptText.value = promptLibrary[category][type][selectedModel];
                    negativePrompt.value = negativePrompts[selectedModel];
                    
                    // Visual feedback
                    document.querySelectorAll('.prompt-option').forEach(opt => opt.style.background = '#1a1a1a');
                    this.style.background = '#2a2a2a';
                }
            });
        });

        // Generate function
        generateBtn.addEventListener('click', async function() {
            const apiKey = apiKeyInput.value.trim();
            const prompt = promptText.value.trim();
            const negative = negativePrompt.value.trim();
            const model = modelSelect.value;

            if (!apiKey) {
                alert('Please enter your Texel.ai API key');
                return;
            }

            if (!prompt) {
                alert('Please enter a prompt or select one from the library');
                return;
            }

            // Disable button and show loading
            generateBtn.disabled = true;
            generateBtn.innerHTML = 'Generating... <div class="spinner" style="width: 16px; height: 16px; border-width: 2px;"></div>';
            
            outputArea.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <div>Generating ${model.toUpperCase()} video...</div>
                    <div style="font-size: 12px; color: #666;">This may take a few minutes</div>
                </div>
            `;

            try {
                // Simulate API call (replace with actual Texel.ai API integration)
                await simulateGeneration(model, prompt, negative, apiKey);
                
            } catch (error) {
                console.error('Generation error:', error);
                outputArea.innerHTML = `
                    <div style="text-align: center; color: #ff6b6b;">
                        <div style="font-size: 48px; margin-bottom: 20px;">‚ö†Ô∏è</div>
                        <div>Generation failed</div>
                        <div style="font-size: 12px; margin-top: 10px;">${error.message}</div>
                    </div>
                `;
            } finally {
                // Re-enable button
                generateBtn.disabled = false;
                generateBtn.innerHTML = 'Generate ‚û°Ô∏è';
            }
        });

        // Real Texel API integration
        async function callTexelAPI(model, prompt, negative, apiKey) {
            const apiEndpoints = {
                hunyuan: 'https://api.texel.ai/v1/video/hunyuan',
                wan21: 'https://api.texel.ai/v1/video/wan21', 
                ltxv: 'https://api.texel.ai/v1/video/ltxv',
                framepack: 'https://api.texel.ai/v1/video/framepack'
            };

            const requestBody = {
                prompt: prompt,
                negative_prompt: negative,
                duration: 10,
                resolution: "1024x1024",
                background: "linear-gradient(135deg, #F4D03F 0%, #F7DC6F 50%, #F1C40F 100%)"
            };

            try {
                const response = await fetch(apiEndpoints[model], {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestBody)
                });

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status} - ${response.statusText}`);
                }

                const result = await response.json();
                return result;
            } catch (error) {
                console.error('Texel API Error:', error);
                throw error;
            }
        }

        // Auto-download configuration
        const AUTO_DOWNLOAD_FOLDER = '/Users/supabowl/Library/Mobile Documents/com~apple~CloudDocs/BHT Promo iCloud/Organized AI/Texel Generated';
        
        // Auto-download function
        async function autoDownloadVideo(videoData) {
            try {
                console.log(`Auto-downloading to: ${AUTO_DOWNLOAD_FOLDER}`);
                
                // Generate filename with timestamp and model
                const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
                const filename = `${videoData.model}_handshake_${timestamp}.mp4`;
                
                // For web implementation, we'll trigger browser download
                // Note: Browser security prevents writing directly to specific folders
                if (videoData.url) {
                    const link = document.createElement('a');
                    link.href = videoData.url;
                    link.download = filename;
                    link.style.display = 'none';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    // Show success message with folder info
                    showDownloadNotification(filename);
                } else {
                    // For demo purposes, simulate download
                    simulateDownload(filename, videoData);
                }
                
            } catch (error) {
                console.error('Auto-download failed:', error);
                showDownloadError(error.message);
            }
        }
        
        function simulateDownload(filename, videoData) {
            // Create a blob URL for demo purposes
            const canvas = document.createElement('canvas');
            canvas.width = 1024;
            canvas.height = 1024;
            const ctx = canvas.getContext('2d');
            
            // Create gradient background
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#F4D03F');
            gradient.addColorStop(0.5, '#F7DC6F');
            gradient.addColorStop(1, '#F1C40F');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Add text
            ctx.fillStyle = '#333';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`${videoData.model.toUpperCase()}`, canvas.width/2, canvas.height/2 - 50);
            ctx.font = '24px Arial';
            ctx.fillText('Generated Video', canvas.width/2, canvas.height/2 + 20);
            ctx.fillText('Human-Robot Handshake', canvas.width/2, canvas.height/2 + 60);
            
            // Convert to blob and download
            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = filename.replace('.mp4', '.png'); // Demo as image
                link.style.display = 'none';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                
                showDownloadNotification(filename);
            });
        }
        
        function showDownloadNotification(filename) {
            // Create notification overlay
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #2ecc71, #27ae60);
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 1000;
                max-width: 350px;
                font-size: 14px;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 20px;">‚úÖ</span>
                    <div>
                        <div style="font-weight: bold; margin-bottom: 5px;">Download Complete!</div>
                        <div style="font-size: 12px; opacity: 0.9;">${filename}</div>
                        <div style="font-size: 11px; opacity: 0.7; margin-top: 5px;">
                            Target: ${AUTO_DOWNLOAD_FOLDER}
                        </div>
                        <div style="font-size: 10px; opacity: 0.6; margin-top: 3px;">
                            Move from Downloads folder to organize in iCloud
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 5000);
        }
        
        function showDownloadError(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #e74c3c, #c0392b);
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 1000;
                max-width: 350px;
                font-size: 14px;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 20px;">‚ùå</span>
                    <div>
                        <div style="font-weight: bold; margin-bottom: 5px;">Download Failed</div>
                        <div style="font-size: 12px; opacity: 0.9;">${message}</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 5000);
        }

        // Media Library Management
        let mediaLibrary = [];

        function saveToMediaLibrary(video) {
            mediaLibrary.push(video);
            console.log('Video saved to media library:', video);
        }

        function showMediaLibrary() {
            const mediaContent = `
                <div style="padding: 20px;">
                    <h2 style="margin-bottom: 20px; color: #ff6b35;">My Media Library</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px;">
                        ${mediaLibrary.length === 0 ? 
                            '<div style="grid-column: 1 / -1; text-align: center; color: #888; padding: 40px;">No videos generated yet. Create your first video!</div>' :
                            mediaLibrary.map(video => `
                                <div style="background: #1a1a1a; border-radius: 8px; padding: 15px; border: 1px solid #444;">
                                    <img src="${video.thumbnail}" style="width: 100%; height: 120px; object-fit: cover; border-radius: 6px; margin-bottom: 10px;">
                                    <div style="font-size: 12px; color: #ccc; margin-bottom: 5px;">${video.model.toUpperCase()}</div>
                                    <div style="font-size: 10px; color: #888; margin-bottom: 10px;">${new Date(video.timestamp).toLocaleDateString()}</div>
                                    <div style="display: flex; gap: 5px;">
                                        <button onclick="playVideo('${video.id}')" style="flex: 1; padding: 5px; background: #ff6b35; border: none; border-radius: 4px; color: white; font-size: 10px; cursor: pointer;">Play</button>
                                        <button onclick="downloadVideo('${video.id}')" style="flex: 1; padding: 5px; background: #444; border: none; border-radius: 4px; color: white; font-size: 10px; cursor: pointer;">Download</button>
                                    </div>
                                </div>
                            `).join('')
                        }
                    </div>
                    <button onclick="backToGeneration()" style="margin-top: 20px; padding: 10px 20px; background: #444; border: none; border-radius: 6px; color: white; cursor: pointer;">‚Üê Back to Generation</button>
                </div>
            `;

            document.querySelector('.interface-container').innerHTML = mediaContent;
        }

        function playVideo(videoId) {
            const video = mediaLibrary.find(v => v.id === videoId);
            if (video) {
                alert(`Playing video: ${video.model.toUpperCase()} - ${video.prompt.substring(0, 50)}...`);
                // In real implementation, open video player
            }
        }

        function downloadVideo(videoId) {
            const video = mediaLibrary.find(v => v.id === videoId);
            if (video) {
                alert(`Downloading: ${video.model.toUpperCase()} video`);
                // In real implementation, trigger download
            }
        }

        function backToGeneration() {
            location.reload(); // Simple way to return to main interface
        }

        // Simulate API generation (replace with actual Texel.ai API)
        async function simulateGeneration(model, prompt, negative, apiKey) {
            try {
                // Attempt real API call first
                // const result = await callTexelAPI(model, prompt, negative, apiKey);
                // For now, simulate the response
                
                return new Promise((resolve, reject) => {
                    setTimeout(async () => {
                        const generatedVideo = {
                            id: `video_${Date.now()}`,
                            model: model,
                            prompt: prompt,
                            url: `https://example.com/generated_video_${Date.now()}.mp4`,
                            thumbnail: `data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300"><defs><linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23F4D03F"/><stop offset="50%" style="stop-color:%23F7DC6F"/><stop offset="100%" style="stop-color:%23F1C40F"/></linearGradient></defs><rect width="400" height="300" fill="url(%23bg)"/><text x="200" y="150" text-anchor="middle" fill="%23333" font-size="16" font-weight="bold">${model.toUpperCase()} Video</text></svg>`,
                            timestamp: new Date().toISOString()
                        };
                        
                        // Save to media library
                        saveToMediaLibrary(generatedVideo);
                        
                        // Auto-download the video
                        await autoDownloadVideo(generatedVideo);
                        
                        // Display result
                        outputArea.innerHTML = `
                            <div style="text-align: center;">
                                <div style="background: linear-gradient(135deg, #F4D03F 0%, #F7DC6F 50%, #F1C40F 100%); 
                                            width: 400px; height: 300px; border-radius: 12px; 
                                            display: flex; align-items: center; justify-content: center;
                                            margin: 0 auto; color: #333; font-weight: bold;">
                                    ${model.toUpperCase()} Generated Video<br>
                                    <span style="font-size: 12px;">Human-Robot Handshake</span><br>
                                    <span style="font-size: 10px; opacity: 0.7;">Auto-downloaded ‚úÖ</span>
                                </div>
                                <div style="margin-top: 15px; font-size: 14px; color: #888;">
                                    Model: ${model.toUpperCase()} | Duration: 10s | Resolution: 1024x1024
                                </div>
                                <div style="margin-top: 10px; font-size: 12px; color: #666; background: #1a1a1a; padding: 8px; border-radius: 6px;">
                                    üìÅ Auto-saved to: ${AUTO_DOWNLOAD_FOLDER}
                                </div>
                            </div>
                        `;
                        resultActions.style.display = 'flex';
                        resolve(generatedVideo);
                    }, 3000);
                });
            } catch (error) {
                throw new Error(`Generation failed: ${error.message}`);
            }
        }

        // Make navigation functional
        document.addEventListener('DOMContentLoaded', function() {
            // Add example handshake videos to demonstrate
            const exampleVideos = [
                {
                    id: 'example_1',
                    model: 'hunyuan',
                    prompt: 'Professional business executive in tailored navy suit extends hand toward advanced humanoid robot with sleek metallic design',
                    url: 'example1.mp4',
                    thumbnail: `data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300"><defs><linearGradient id="bg1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23F4D03F"/><stop offset="50%" style="stop-color:%23F7DC6F"/><stop offset="100%" style="stop-color:%23F1C40F"/></linearGradient></defs><rect width="400" height="300" fill="url(%23bg1)"/><text x="200" y="140" text-anchor="middle" fill="%23333" font-size="14" font-weight="bold">HUNYUAN Handshake</text><text x="200" y="160" text-anchor="middle" fill="%23666" font-size="10">Cinematic Quality</text></svg>`,
                    timestamp: new Date(Date.now() - 86400000).toISOString() // Yesterday
                },
                {
                    id: 'example_2', 
                    model: 'wan21',
                    prompt: 'Distinguished technology executive in elegant business attire engages in groundbreaking handshake',
                    url: 'example2.mp4',
                    thumbnail: `data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300"><defs><linearGradient id="bg2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23F4D03F"/><stop offset="50%" style="stop-color:%23F7DC6F"/><stop offset="100%" style="stop-color:%23F1C40F"/></linearGradient></defs><rect width="400" height="300" fill="url(%23bg2)"/><text x="200" y="140" text-anchor="middle" fill="%23333" font-size="14" font-weight="bold">WAN 2.1 Handshake</text><text x="200" y="160" text-anchor="middle" fill="%23666" font-size="10">Premium Detail</text></svg>`,
                    timestamp: new Date(Date.now() - 172800000).toISOString() // 2 days ago
                }
            ];

            mediaLibrary = [...exampleVideos];

            // Make My Media clickable
            const myMediaNav = document.querySelector('.nav-item:nth-child(4)'); // My Media item
            if (myMediaNav) {
                myMediaNav.addEventListener('click', showMediaLibrary);
                myMediaNav.style.cursor = 'pointer';
            }
        });

        // Result action functions
        function downloadResult() {
            alert('Download functionality would be implemented with actual Texel.ai API integration');
        }

        function saveToLibrary() {
            alert('Save to library functionality would be implemented with actual Texel.ai API integration');
        }

        function shareResult() {
            alert('Share functionality would be implemented with actual Texel.ai API integration');
        }

        // Initialize with default negative prompt
        negativePrompt.value = negativePrompts.ltxv;

        // Auto-save API key to sessionStorage (not localStorage per restrictions)
        apiKeyInput.addEventListener('input', function() {
            // In a real implementation, handle API key securely
            console.log('API key updated');
        });

        // Load API key from session if available
        window.addEventListener('load', function() {
            // In a real implementation, load saved API key securely
            console.log('Interface loaded');
        });
    </script>
</body>
</html>